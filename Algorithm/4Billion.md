# 如何判断一个数在40亿个整数中

- 前置知识

1个整数(int型)，4个字节，表示范围：有符号 `-2^(4*8-1)=-2147483648 ~ 2^(4*8-1)-1=2147483647` ，无符号 `0 ~ 2^(4*8)=4294967296`

40亿个整数，共`160亿`字节，大概占用`16GB`内存

通常来说，普通电脑承受不了这么大的内存

- 方案一：

使用位图(bitmap)，申请40亿位，共`5亿`字节，大概占用`0.5GB`内存

整数存在，对应位图序号上置为1，否则为0

搜索整数，只需要判断对应位上，是否为1

- 方案二：

根据场景判断，32位int的范围是42亿，40亿整数中肯定有一些是连续的，先外部排序，用一个初始的数和一个长度构成一个数据结构，来表示一段连续的数，举个例子。

1 2 3 4 6 7用(1,4)和(6,2)表示，变成了2个数表示。来新数用二分法查找。

最差情况就是2亿多的断点，也就是2亿多的结构体，每个结构体8个字节，大概16亿字节，1.6GB，在内存中可以放下。

